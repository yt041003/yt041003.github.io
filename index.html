<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è²¨å¹£ç¥æ¢</title>
    <style>
        :root {
            --bg-color: #f0f2f5;
            --header-bg: #2c3e50;
            --card-bg: #ffffff;
            --wallet-bg: #8d6e63;
            --wallet-border: #5d4037;
            --success-color: #27ae60;
            --error-color: #c0392b;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            /* é—œéµä¿®æ­£ï¼šä½¿ç”¨ dvh é©æ‡‰ iPad ç€è¦½å™¨å·¥å…·åˆ— */
            height: 100dvh; 
            background-color: var(--bg-color);
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* ç¦æ­¢æ•´å€‹é é¢æ»‘å‹•ï¼Œåªå…è¨±å±€éƒ¨æ»‘å‹• */
            user-select: none;
            -webkit-user-select: none;
        }

        /* === 1. é ‚éƒ¨ Header (å›ºå®šé«˜åº¦) === */
        header {
            background-color: var(--header-bg);
            color: white;
            padding: 8px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0; /* ä¸å…è¨±ç¸®å° */
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            height: 50px;
        }

        h1 { margin: 0; font-size: 1.1rem; }
        .counter { background: rgba(255,255,255,0.2); padding: 4px 10px; border-radius: 10px; font-size: 0.9rem;}

        /* === 2. é¡Œç›®å€ (å›ºå®šé«˜åº¦) === */
        .question-container {
            background-color: var(--card-bg);
            padding: 5px 10px;
            text-align: center;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            z-index: 5;
            flex-shrink: 0;
            /* è¨­å®šæœ€å¤§é«˜åº¦ï¼Œé¿å…é¡Œç›®ä½”å¤ªå¤šä½ */
            height: 15%; 
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid #ddd;
        }

        .clue-text {
            font-size: 1.3rem; /* ç¨å¾®èª¿å°å­—é«”ä»¥é©æ‡‰ iPad */
            color: #2c3e50;
            font-weight: bold;
            line-height: 1.3;
            max-width: 900px;
        }

        .highlight {
            color: #c0392b;
            font-size: 1.5rem;
            padding: 0 4px;
            display: inline-block;
            border-bottom: 2px solid rgba(192, 57, 43, 0.3);
        }

        /* === 3. ä¸»è¦å…§å®¹å€ (å¡«æ»¿å‰©é¤˜ç©ºé–“) === */
        .main-content {
            display: flex;
            flex: 1; /* è‡ªå‹•å¡«æ»¿ */
            overflow: hidden; /* å…§éƒ¨å„è‡ªæ²å‹• */
            padding: 10px;
            gap: 10px;
        }

        /* --- å·¦é‚Šï¼šè²¨å¹£é¸æ“‡å€ --- */
        .left-panel {
            width: 40%;
            background-color: white;
            border-radius: 15px;
            padding: 10px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            overflow-y: auto; /* å…è¨±å‚ç›´æ²å‹• */
            -webkit-overflow-scrolling: touch; /* iPad é †æ»‘æ²å‹• */
        }

        .section-header {
            font-size: 1rem;
            color: #2c3e50;
            font-weight: bold;
            background-color: #f0f3f4;
            padding: 8px;
            border-radius: 8px;
            margin-bottom: 10px;
            text-align: center;
            position: sticky; /* æ¨™é¡Œå›ºå®šåœ¨ä¸Šæ–¹ */
            top: 0;
            z-index: 2;
        }

        /* ä½¿ç”¨ Grid è®“è²¨å¹£æ•´é½Šæ’åˆ— */
        .currency-grid-coins {
            display: grid;
            /* ç¡¬å¹£ï¼šå¼·åˆ¶ 3 æˆ– 4 åˆ—ï¼Œè¦–ä¹å¯¬åº¦è‡ªå‹•èª¿æ•´ */
            grid-template-columns: repeat(auto-fit, minmax(55px, 1fr));
            gap: 10px;
            justify-items: center; /* æ°´å¹³ç½®ä¸­ */
            margin-bottom: 15px;
        }

        .currency-grid-notes {
            display: grid;
            /* ç´™å¹£ï¼šå¼·åˆ¶ 2 åˆ— */
            grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
            gap: 10px;
            justify-items: center;
        }

        .currency-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0;
            transition: transform 0.1s;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .currency-btn:active { transform: scale(0.9); }

        /* é¸æ“‡å€åœ–ç‰‡å¤§å° */
        .select-img-coin { width: 55px; height: 55px; object-fit: contain; filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.2)); pointer-events: none;}
        .select-img-note { width: 90px; height: auto; object-fit: contain; filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.2)); pointer-events: none;}

        /* --- å³é‚Šï¼šç­”æ¡ˆå€ (éŠ€åŒ…) --- */
        .right-panel {
            width: 60%;
            display: flex;
            flex-direction: column;
            gap: 10px;
            height: 100%;
        }

        .wallet-container {
            flex: 1; /* ä½”æ“šå¤§éƒ¨åˆ†ç©ºé–“ */
            background-color: var(--wallet-bg);
            background-image: url('https://www.transparenttextures.com/patterns/leather.png');
            border-radius: 15px;
            border: 6px solid var(--wallet-border);
            padding: 15px;
            position: relative;
            box-shadow: inset 0 0 30px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden; 
        }

        .user-answer-zone {
            width: 100%;
            height: 100%;
            background-color: rgba(255,255,255,0.1);
            border: 2px dashed rgba(255,255,255,0.5);
            border-radius: 10px;
            padding: 10px;
            display: flex;
            flex-wrap: wrap;
            align-content: flex-start;
            justify-content: center;
            gap: 8px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            position: relative;
            transition: background-color 0.3s;
        }

        .user-answer-zone.correct { background-color: rgba(39, 174, 96, 0.2); border-color: var(--success-color); }
        .user-answer-zone.wrong { background-color: rgba(192, 57, 43, 0.2); border-color: var(--error-color); }

        .placeholder-text {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            color: rgba(255,255,255,0.7);
            font-size: 1.2rem;
            pointer-events: none;
            text-align: center;
            width: 100%;
        }

        /* éŠ€åŒ…å…§çš„åœ–ç‰‡ (æ”¾å¤§é¡¯ç¤º) */
        .user-item {
            cursor: pointer;
            animation: popIn 0.2s ease-out;
            position: relative;
            filter: drop-shadow(3px 3px 5px rgba(0,0,0,0.4));
            width: 70px; 
            height: 70px;
            object-fit: contain;
            flex-shrink: 0; 
        }

        .user-item.note-item {
            width: 140px;
            height: auto;
        }

        .user-item::after {
            content: "Ã—";
            position: absolute;
            top: -5px; right: -5px;
            background: #c0392b; color: white;
            border: 2px solid white;
            border-radius: 50%;
            width: 20px; height: 20px;
            font-size: 14px;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        @keyframes popIn { from { transform: scale(0); } to { transform: scale(1); } }

        /* --- åº•éƒ¨æŒ‰éˆ•å€ --- */
        .controls-row {
            display: flex;
            gap: 10px;
            justify-content: center;
            padding-bottom: 5px; /* é ç•™åº•éƒ¨å®‰å…¨è·é›¢ */
            flex-shrink: 0;
            min-height: 50px;
        }

        .btn {
            border: none;
            padding: 0 20px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            color: white;
            box-shadow: 0 3px 0 rgba(0,0,0,0.2);
            transition: transform 0.1s;
            flex: 1;
            height: 45px; /* å›ºå®šé«˜åº¦ï¼Œé˜²æ­¢è®Šå½¢ */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .btn:active { transform: translateY(3px); box-shadow: none; }

        .btn-submit { background-color: var(--success-color); }
        .btn-clear { background-color: #7f8c8d; }
        .btn-next { background: linear-gradient(135deg, #e74c3c, #8e44ad); display: none; }

        /* çµæœé€šçŸ¥ */
        .result-overlay {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px 40px;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.5);
            text-align: center;
            font-size: 2rem;
            font-weight: bold;
            z-index: 100;
            display: none;
            animation: zoomIn 0.3s;
            width: 80%;
            max-width: 300px;
        }
        .res-correct { color: var(--success-color); border: 5px solid var(--success-color); }
        .res-wrong { color: var(--error-color); border: 5px solid var(--error-color); }

        @keyframes zoomIn { from { transform: translate(-50%, -50%) scale(0); } to { transform: translate(-50%, -50%) scale(1); } }

        /* === iPad ç›´å‘ (Portrait) é©é… === */
        @media (max-width: 900px) {
            /* æ”¹ç‚ºä¸Šä¸‹æ’åˆ— */
            .main-content { flex-direction: column; gap: 5px; }
            
            /* é¸æ“‡å€åœ¨ä¸Šæ–¹ï¼Œé«˜åº¦æ¸›å°‘ */
            .left-panel { width: 100%; height: 35%; order: 1; padding: 5px; }
            .currency-grid-coins, .currency-grid-notes {
                grid-template-columns: repeat(auto-fit, minmax(50px, 1fr)); /* æ›´ç·Šæ¹Š */
            }
            .select-img-note { width: 80px; }

            /* éŠ€åŒ…åœ¨ä¸‹æ–¹ï¼Œä½”æ“šæ›´å¤šç©ºé–“æ–¹ä¾¿æ“ä½œ */
            .right-panel { width: 100%; height: 65%; order: 2; }
            
            .clue-text { font-size: 1.2rem; }
            .question-container { height: auto; min-height: 70px; padding: 5px; }
        }
    </style>
</head>
<body>

<header>
    <div id="qCounter" class="counter">é¡Œç›®: 1/21</div>
    <h1>ğŸ•µï¸â€â™‚ï¸ è²¨å¹£ç¥æ¢</h1>
    <div style="width: 60px;"></div> 
</header>

<!-- é¡Œç›®å€ -->
<div class="question-container">
    <div id="clueText" class="clue-text">è«‹æŒ‰ä¸‹æ–¹æŒ‰éˆ•é–‹å§‹éŠæˆ²</div>
</div>

<!-- ä¸»è¦å…§å®¹ -->
<div class="main-content">
    
    <!-- å·¦å´ï¼šè²¨å¹£é¸æ“‡ (Grid ä½ˆå±€) -->
    <div class="left-panel">
        
        <div class="section-header">ğŸª™ ç¡¬å¹£</div>
        <div class="currency-grid-coins">
            <button class="currency-btn" onclick="addToAnswer('c10')"><img id="btn-c10" class="select-img-coin"></button>
            <button class="currency-btn" onclick="addToAnswer('c20')"><img id="btn-c20" class="select-img-coin"></button>
            <button class="currency-btn" onclick="addToAnswer('c50')"><img id="btn-c50" class="select-img-coin"></button>
            <button class="currency-btn" onclick="addToAnswer('c1')"><img id="btn-c1" class="select-img-coin"></button>
            <button class="currency-btn" onclick="addToAnswer('c2')"><img id="btn-c2" class="select-img-coin"></button>
            <button class="currency-btn" onclick="addToAnswer('c5')"><img id="btn-c5" class="select-img-coin"></button>
            <button class="currency-btn" onclick="addToAnswer('c10-coin')"><img id="btn-c10-coin" class="select-img-coin"></button>
        </div>

        <div class="section-header">ğŸ’µ ç´™å¹£</div>
        <div class="currency-grid-notes">
            <button class="currency-btn" onclick="addToAnswer('note-10')"><img id="btn-note-10" class="select-img-note"></button>
            <button class="currency-btn" onclick="addToAnswer('note-20')"><img id="btn-note-20" class="select-img-note"></button>
            <button class="currency-btn" onclick="addToAnswer('note-50')"><img id="btn-note-50" class="select-img-note"></button>
            <button class="currency-btn" onclick="addToAnswer('note-100')"><img id="btn-note-100" class="select-img-note"></button>
            <button class="currency-btn" onclick="addToAnswer('note-500')"><img id="btn-note-500" class="select-img-note"></button>
            <button class="currency-btn" onclick="addToAnswer('note-1000')"><img id="btn-note-1000" class="select-img-note"></button>
        </div>
    </div>

    <!-- å³å´ï¼šéŠ€åŒ…èˆ‡æ§åˆ¶ -->
    <div class="right-panel">
        <div class="wallet-container">
            <div id="userZone" class="user-answer-zone">
                <div class="placeholder-text" id="placeholder">å°‡è²¨å¹£æ”¾å…¥é€™è£¡</div>
            </div>
        </div>
        
        <div class="controls-row">
            <button id="btnClear" class="btn btn-clear" onclick="clearUserAnswer()">æ¸…é™¤</button>
            <button id="btnSubmit" class="btn btn-submit" onclick="checkAnswer()">æäº¤ç­”æ¡ˆ</button>
            <button id="btnNext" class="btn btn-next" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ â¡</button>
        </div>
    </div>
</div>

<div id="resultMsg" class="result-overlay"></div>

<script>
    // === åœ–ç‰‡é€£çµ ===
    const imgData = {
        'c10': "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTiTmKqFRrWE4Qzbm2gIUsb6vUUYhKcWTme3A&s",
        'c20': "https://media.karousell.com/media/photos/products/2018/10/04/_1998___02_1538636002_e640ad240",
        'c50': "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRKQxKDzvPW2v21PLXVbCRxaV7nejHb9lcXIA&s",
        'c1': "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcScRblcaaQ7ee2WyE2KSg4l_KKgv5rpeXJ1lw&s",
        'c2': "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS98wcP_CcOLJBVNTs_xql0PzmPxUycsHMmmg&s",
        'c5': "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSGPEQUk6kRE8WW9X6RF71RIYxluo-XNELAcw&s",
        'c10-coin': "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSAskaWMB2Y0Mb6bXL_OLqu-K4mRUK79SFBcA&s",
        'note-10': "https://www.hkma.gov.hk/media/chi/img/key-functions/money/notes-and-coins/notes/design-security-features-of-2010-currency-notes/10%20Dollar/Paper%20Note/notefront_1_mark.jpg",
        'note-20': "https://www.hkma.gov.hk/media/eng/img/key-functions/money/notes-and-coins/notes/design-security-features-of-currency-notes/2018/HSBC/20/HSBC_20_(Front).jpg",
        'note-50': "https://www.hkma.gov.hk/media/eng/img/key-functions/money/notes-and-coins/notes/design-security-features-of-currency-notes/2018/HSBC/50/HSBC_50_(Front).jpg",
        'note-100': "https://www.hkma.gov.hk/media/eng/img/key-functions/money/notes-and-coins/notes/design-security-features-of-currency-notes/2018/HSBC/100/banknotes_hsbc_100_front_mark.png",
        'note-500': "https://www.hkma.gov.hk/media/eng/img/key-functions/money/notes-and-coins/notes/design-security-features-of-currency-notes/2018/HSBC/500/banknotes_hsbc_500_front_mark.jpg",
        'note-1000': "https://www.hkma.gov.hk/media/eng/img/key-functions/money/notes-and-coins/notes/design-security-features-of-currency-notes/2018/HSBC/1000/banknotes_hsbc_1000_front_mark.jpg"
    };

    // åˆå§‹åŒ–åœ–ç‰‡
    for (const [key, url] of Object.entries(imgData)) {
        const imgEl = document.getElementById(`btn-${key}`);
        if (imgEl) imgEl.src = url;
    }

     // === 21æ¢é¡Œåº« (å·²ä¿®æ­£é‚è¼¯æ¼æ´ä¸¦ç§»é™¤ä¿—ç¨±) ===
    const originalQuestions = [
        // 1. åŸºç¤é¡Œ (Warm-up)
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>3å€‹</span> ç¡¬å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>3å…ƒ5è§’</span>ã€‚", ans: [ ['c2', 'c1', 'c50'] ] },
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>3å€‹</span> ç¡¬å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>4å…ƒ</span>ã€‚", ans: [ ['c2', 'c1', 'c1'] ] },
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>2å€‹</span> è²¨å¹£ï¼Œé¢å€¼ä¸€æ¨£ï¼Œä½†ä¸€å€‹æ˜¯<span class='highlight'>ç´™å¹£</span>ï¼Œä¸€å€‹æ˜¯<span class='highlight'>ç¡¬å¹£</span>ã€‚", ans: [ ['note-10', 'c10-coin'] ] },
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>2å¼µ</span> ç´™å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>40å…ƒ</span>ã€‚", ans: [ ['note-20', 'note-20'] ] },
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>3å¼µ</span> ç´™å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>150å…ƒ</span>ï¼Œè€Œä¸”å®ƒå€‘çš„<span class='highlight'>é¢å€¼éƒ½ç›¸åŒ</span>ã€‚", ans: [ ['note-50', 'note-50', 'note-50'] ] },
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>3å€‹</span> ç¡¬å¹£ï¼Œå½¢ç‹€éƒ½ä¸æ˜¯åœ“å½¢çš„ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>6å…ƒ</span>ã€‚", ans: [ ['c2', 'c2', 'c2'] ] },
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>4å€‹</span> ç¡¬å¹£ï¼Œå…¨éƒ¨é¢å€¼ä¸€æ¨£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>2å…ƒ</span>ã€‚", ans: [ ['c50', 'c50', 'c50', 'c50'] ] },

        // 2. ä¸­éšæ•¸å­¸æ¨ç† (æ‹†è§£é¢å€¼)
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>3å¼µ</span> ç´™å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>60å…ƒ</span>ã€‚", ans: [ ['note-20', 'note-20', 'note-20'] ] },
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>2å¼µ</span> ç´™å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>120å…ƒ</span>ã€‚", ans: [ ['note-100', 'note-20'] ] },
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>3å¼µ</span> ç´™å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>170å…ƒ</span>ã€‚", ans: [ ['note-100', 'note-50', 'note-20'] ] },
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>1å¼µ</span> ç´™å¹£å’Œ <span class='highlight'>3å€‹</span> ç¡¬å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>13å…ƒ</span>ã€‚", ans: [ ['note-10', 'c1', 'c1', 'c1'], ['note-10', 'c2', 'c50', 'c50'] ] },
        
        // 3. é«˜éšé‚è¼¯èˆ‡é™åˆ¶ (High Order Thinking)
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>2å¼µ</span> ç´™å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>100å…ƒ</span>ã€‚", ans: [ ['note-50', 'note-50'] ] },
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>2å¼µ</span> ç´™å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>1000å…ƒ</span>ã€‚", ans: [ ['note-500', 'note-500'] ] },
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>3å€‹</span> ç¡¬å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>6å…ƒ</span>ï¼Œä½†æˆ‘ <span class='highlight'>æ²’æœ‰1å…ƒ</span> ç¡¬å¹£ã€‚", ans: [ ['c5', 'c50', 'c50'] ] },
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>3å€‹</span> ç¡¬å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>3å…ƒ</span>ï¼Œä½†æˆ‘ <span class='highlight'>æ²’æœ‰1å…ƒ</span> ç¡¬å¹£ã€‚", ans: [ ['c2', 'c50', 'c50'] ] },

        // 4. è¤‡é›œæ··åˆé‹ç®—
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>2å¼µ</span> ç´™å¹£å’Œ <span class='highlight'>1å€‹</span> ç¡¬å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>122å…ƒ</span>ã€‚", ans: [ ['note-100', 'note-20', 'c2'] ] },
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>2å¼µ</span> ç´™å¹£å’Œ <span class='highlight'>1å€‹</span> ç¡¬å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>60å…ƒ5è§’</span>ã€‚", ans: [ ['note-50', 'note-10', 'c50'] ] },
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>1å¼µ</span> ç´™å¹£å’Œ <span class='highlight'>2å€‹</span> ç¡¬å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>102å…ƒ</span>ã€‚", ans: [ ['note-100', 'c1', 'c1'] ] },
        // ä¿®æ­£ï¼šæŒ‡å®šâ€œ1å¼µç´™å¹£â€ç¢ºä¿ç­”æ¡ˆå”¯ä¸€ (500 + 10)
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>1å¼µ</span> ç´™å¹£å’Œ <span class='highlight'>1å€‹</span> ç¡¬å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>510å…ƒ</span>ï¼Œä½†è£¡é¢ <span class='highlight'>æ²’æœ‰</span> 1000å…ƒç´™å¹£ã€‚", ans: [ ['note-500', 'c10-coin'] ] }, 
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>1å¼µ</span> ç´™å¹£å’Œ <span class='highlight'>3å€‹</span> ç¡¬å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>10å…ƒ7è§’</span>ã€‚", ans: [ ['note-10', 'c50', 'c10', 'c10'] ] },
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>1å¼µ</span> ç´™å¹£å’Œ <span class='highlight'>2å€‹</span> ç¡¬å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>51å…ƒ</span>ã€‚", ans: [ ['note-50', 'c50', 'c50'] ] },
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>3å€‹</span> ç¡¬å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>1å…ƒ7è§’</span>ã€‚", ans: [ ['c1', 'c50', 'c20'] ] },
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>3å¼µ</span> ç´™å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>300å…ƒ</span>ã€‚", ans: [ ['note-100', 'note-100', 'note-100'] ] },
        { text: "è¢‹è£¡é¢æœ‰ <span class='highlight'>2å¼µ</span> ç´™å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>600å…ƒ</span>ï¼Œä¸€å¼µæ˜¯å•¡è‰²ï¼Œä¸€å¼µæ˜¯ç´…è‰²ã€‚", ans: [ ['note-500', 'note-100'] ] },
        
        // ä¿®æ­£ï¼šæŒ‡å®šâ€œå…±4å¼µç´™å¹£â€ï¼Œç¢ºä¿å”¯ä¸€è§£ (1000x2, 500x1, 100x1)
        { text: "è¢‹è£¡é¢å…±æœ‰ <span class='highlight'>4å¼µ</span> ç´™å¹£ï¼Œç¸½å€¼æ˜¯ <span class='highlight'>2600å…ƒ</span>ï¼Œç•¶ä¸­æœ‰ <span class='highlight'>2å¼µ</span> 1000å…ƒç´™å¹£ã€‚", ans: [ ['note-1000', 'note-1000', 'note-500', 'note-100'] ] }
    ];

    let remainingQuestions = [...originalQuestions];
    let currentQuestion = null;
    let userSelection = [];

    nextQuestion();

    // === åŠŸèƒ½å‡½æ•¸ ===

    function addToAnswer(key) {
        userSelection.push(key);
        
        const zone = document.getElementById("userZone");
        document.getElementById("placeholder").style.display = "none";

        const img = document.createElement("img");
        img.src = imgData[key];
        
        if (key.startsWith('note')) {
            img.className = "user-item note-item";
        } else {
            img.className = "user-item";
        }

        img.onclick = function() {
            const idx = userSelection.indexOf(key);
            if (idx > -1) userSelection.splice(idx, 1);
            this.remove();
            
            if (userSelection.length === 0) {
                document.getElementById("placeholder").style.display = "block";
            }
        };

        zone.appendChild(img);
    }

    function clearUserAnswer() {
        userSelection = [];
        const zone = document.getElementById("userZone");
        const items = zone.querySelectorAll(".user-item");
        items.forEach(i => i.remove());
        
        document.getElementById("placeholder").style.display = "block";
        zone.classList.remove("correct", "wrong");
    }

    function checkAnswer() {
        if (!currentQuestion) return;

        const sortedUser = [...userSelection].sort();
        const userJson = JSON.stringify(sortedUser);

        const isCorrect = currentQuestion.ans.some(validAns => {
            const sortedValid = [...validAns].sort();
            return JSON.stringify(sortedValid) === userJson;
        });
        
        const resultDiv = document.getElementById("resultMsg");
        const zone = document.getElementById("userZone");

        resultDiv.style.display = "block";
        
        if (isCorrect) {
            resultDiv.innerText = "âœ… ç­”å°äº†ï¼";
            resultDiv.className = "result-overlay res-correct";
            zone.classList.add("correct");
            zone.classList.remove("wrong");
            
            document.getElementById("btnSubmit").style.display = "none";
            document.getElementById("btnClear").style.display = "none";
            document.getElementById("btnNext").style.display = "block";
        } else {
            resultDiv.innerText = "âŒ å†è©¦ä¸€æ¬¡";
            resultDiv.className = "result-overlay res-wrong";
            zone.classList.add("wrong");
            
            setTimeout(() => {
                resultDiv.style.display = "none";
            }, 1500);
        }
    }

    function nextQuestion() {
        clearUserAnswer();
        document.getElementById("userZone").classList.remove("correct", "wrong");
        document.getElementById("btnSubmit").style.display = "block";
        document.getElementById("btnClear").style.display = "block";
        document.getElementById("btnNext").style.display = "none";
        document.getElementById("resultMsg").style.display = "none";

        if (remainingQuestions.length === 0) {
            remainingQuestions = [...originalQuestions]; 
            alert("é¡Œç›®å·²å…¨éƒ¨å®Œæˆï¼Œé‡æ–°é–‹å§‹ï¼");
        }

        const randomIndex = Math.floor(Math.random() * remainingQuestions.length);
        currentQuestion = remainingQuestions[randomIndex];
        remainingQuestions.splice(randomIndex, 1);

        document.getElementById("clueText").innerHTML = currentQuestion.text;
        
        const currentIdx = originalQuestions.length - remainingQuestions.length;
        document.getElementById("qCounter").innerText = `é¡Œç›®: ${currentIdx} / ${originalQuestions.length}`;
    }

</script>

</body>
</html>
